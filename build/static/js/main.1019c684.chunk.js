(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(59)},30:function(e,t,a){},32:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),o=(a(30),a(31),a(4)),c=a(5),l=a(8),h=a(6),u=a(2),m=a(7),p=a(22),g=(a(32),a(23)),d=a.n(g),f=a(10),b=a(12),v=a.n(b);function y(e){return r.a.createElement("tr",{onClick:function(){return e.changePage(e.info.id)},className:"App_table_shipment"},r.a.createElement("th",{scope:"row"},e.info.id),r.a.createElement("td",null,e.info.name),r.a.createElement("td",null,e.info.mode),r.a.createElement("td",null,e.info.type),r.a.createElement("td",null,e.info.origin),r.a.createElement("td",null,e.info.destination),r.a.createElement("td",null,e.info.status))}function S(e){return r.a.createElement("tr",null,["id","name","mode","type","origin","destination","status"].map(function(t){return r.a.createElement("th",{className:t===e.sortCategory?"App_active-filter":"",scope:"col",onClick:function(){return e.handleSortClick(t)},key:v.a.generate()},t," ",t===e.sortCategory&&r.a.createElement("div",{className:"asc"===e.sortDirection?"asc":"desc"}))}))}var E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).renderShipments=a.renderShipments.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderShipments",value:function(){var e=this;return this.props.shipments.map(function(t){return r.a.createElement(y,{info:t,key:v.a.generate(),changePage:e.props.changePage})})}},{key:"render",value:function(){return r.a.createElement("table",{className:"table table-striped table-sm App_table"},r.a.createElement("thead",null,r.a.createElement(S,{handleSortClick:this.props.handleSortClick,sortCategory:this.props.sortCategory,sortDirection:this.props.sortDirection})),r.a.createElement("tbody",null,this.renderShipments()))}}]),t}(r.a.Component);function C(e){return r.a.createElement("div",{className:"App_navigation ml-auto my-3"},r.a.createElement("div",{className:"input-group input-group-sm"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Seacrh by ID")),r.a.createElement("input",{type:"text","aria-label":"First name",className:"form-control",onChange:function(t){return e.searchById(t)}})))}function P(e){return r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination justify-content-center"},1!==e.numberOfPages&&r.a.createElement("li",{className:"page-item"},r.a.createElement("span",{className:"page-link text-secondary","aria-label":"Previous",onClick:function(){return e.changePageNumber("-")}},r.a.createElement("span",{"aria-hidden":"true"},"\xab"))),1!==e.numberOfPages&&r.a.createElement(n.Fragment,null,function(){for(var t=[],a=function(a){t.push(r.a.createElement("li",{className:"page-item "+(e.currentPage===a?"active":""),key:"pageNumber"+a},r.a.createElement("span",{className:"page-link text-secondary",onClick:function(){return e.changePageNumber(a)}},a)))},n=1;n<=e.numberOfPages;n++)a(n);return t}()),1!==e.numberOfPages&&r.a.createElement("li",{className:"page-item"},r.a.createElement("span",{className:"page-link text-secondary","aria-label":"Next",onClick:function(){return e.changePageNumber("+")}},r.a.createElement("span",{"aria-hidden":"true"},"\xbb")))))}var O="asc",F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={shownShipments:[],numberOfPages:1,currentPage:1,sortCategory:"id",sortDirection:O,searchId:""},a.changePageNumber=a.changePageNumber.bind(Object(u.a)(a)),a.showShipmentsOfCurrentPage=a.showShipmentsOfCurrentPage.bind(Object(u.a)(a)),a.searchById=a.searchById.bind(Object(u.a)(a)),a.sortByField=a.sortByField.bind(Object(u.a)(a)),a.handleSortClick=a.handleSortClick.bind(Object(u.a)(a)),a.changePage=a.changePage.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(this.props.store.shipments.length)return this.setState({numberOfPages:this.calculateNumberOfPages(this.props.store.shipments)}),void this.sortByField(this.state.sortCategory,this.state.sortDirection);var e=this;d.a.get("http://localhost:3004/shipments").then(function(t){e.setState({shownShipments:t.data,numberOfPages:e.calculateNumberOfPages(t.data)}),e.props.store.setShipments(t.data),e.sortByField(e.state.sortCategory,e.state.sortDirection)}).catch(function(e){console.log(e)})}},{key:"calculateNumberOfPages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Math.ceil(e.length/20)}},{key:"changePageNumber",value:function(e){var t=function(e,t,a){var n;if("number"===typeof e)n=e;else if("string"===typeof e){switch(e){case"+":n=t+1;break;case"-":n=t-1;break;default:n=t}(n<1||n>a)&&(n=t)}return n}(e,this.state.currentPage,this.state.numberOfPages);this.setState({currentPage:t}),this.sortByField(this.state.sortCategory,this.state.sortDirection,t)}},{key:"handleSortClick",value:function(e){var t="";t=e!==this.state.sortCategory?O:this.state.sortDirection===O?"desc":O,this.sortByField(e,t),this.setState({sortCategory:e,sortDirection:t})}},{key:"sortByField",value:function(e,t){var a,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.currentPage,s=(a=this.props.store.shipments.slice(),n=e,a.sort(function(e,t){var a=e[n],r=t[n];return a<r?-1:a>r?1:0}));"desc"===t&&s.reverse(),this.state.searchId&&(s=this.filterShipments(s,this.state.searchId)),void 0===r&&(r=this.state.currentPage),this.showShipmentsOfCurrentPage(s,r)}},{key:"showShipmentsOfCurrentPage",value:function(e,t){var a=20*(t-1);this.setState({shownShipments:e.slice(a,a+20)})}},{key:"filterShipments",value:function(e,t){return e.filter(function(e){return e.id.substr(0,t.length)===t})}},{key:"searchById",value:function(e){var t=this.props.store.shipments.slice(),a=this.filterShipments(t,e.target.value);this.setState({shownShipments:a,numberOfPages:this.calculateNumberOfPages(a),searchId:e.target.value,currentPage:1})}},{key:"changePage",value:function(e){this.props.store.setSelectedShipmentId(e),this.props.changePage()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"List of Shipments."),r.a.createElement(C,{searchById:this.searchById}),r.a.createElement(E,{shipments:this.state.shownShipments,handleSortClick:this.handleSortClick,sortCategory:this.state.sortCategory,sortDirection:this.state.sortDirection,changePage:this.changePage}),r.a.createElement(P,{numberOfPages:this.state.numberOfPages,currentPage:this.state.currentPage,changePageNumber:this.changePageNumber}))}}]),t}(r.a.Component),k=F=Object(f.inject)("store")(Object(f.observer)(F));function w(e){return r.a.createElement("form",{className:"form-inline"},r.a.createElement("div",{className:"form-group mx-sm-3 mb-2"},r.a.createElement("label",{htmlFor:"inputPassword2",className:"sr-only"},"New Value for ",e.fieldToChange),r.a.createElement("input",{type:"text",className:"form-control form-control-sm",id:"inputPassword2",placeholder:"New Value for ".concat(e.fieldToChange),onChange:function(t){return e.updateShipmentValue(t)},tabIndex:e.isFormForValueChangeShown?0:""})),r.a.createElement("button",{type:"submit",className:"btn btn-secondary btn-sm mb-2",onClick:function(t){return e.submitFormForNewShipmentValue(t)}},"Save"))}function N(e){var t=[],a=e.shipmentDetails,s=function(s){var i="name"===s,o=a[s];"object"===typeof o&&(o=function(e){return e.map(function(e,t){var a=[];for(var s in e)a.push(r.a.createElement("span",{key:s},"".concat(s," - ").concat(e[s]),r.a.createElement("br",null)));return r.a.createElement(n.Fragment,{key:t+1},r.a.createElement("i",null,t+1,". "),a)})}(o)),t.push(r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("div",{className:"App_shipment-details_key px-1"},s),r.a.createElement("div",{className:"App_shipment-details_value px-1"},o,i&&r.a.createElement("input",{type:"button",className:"btn btn-outline-secondary btn-sm float-right",value:"change",onClick:function(){return e.showFormForValueChange(s)}}))))};for(var i in a)s(i);return r.a.createElement("div",{className:"App_shipment-details d-flex flex-column mx-auto p-3 text-left bg-light"},t)}var j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={isFormForValueChangeShown:!1,fieldToChange:"",newValueForShipmentUpdate:""},a.showFormForValueChange=a.showFormForValueChange.bind(Object(u.a)(a)),a.updateShipmentValue=a.updateShipmentValue.bind(Object(u.a)(a)),a.submitFormForNewShipmentValue=a.submitFormForNewShipmentValue.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"showFormForValueChange",value:function(e){this.setState({isFormForValueChangeShown:!this.state.isFormForValueChangeShown,fieldToChange:e})}},{key:"updateShipmentValue",value:function(e){this.setState({newValueForShipmentUpdate:e.target.value})}},{key:"submitFormForNewShipmentValue",value:function(e){e.preventDefault(),this.props.store.modifyShipments(this.findCurrentShipmentInArray().id,this.state.fieldToChange,this.state.newValueForShipmentUpdate),this.setState({isFormForValueChangeShown:!this.state.isFormForValueChangeShown})}},{key:"findCurrentShipmentInArray",value:function(){var e=this;return this.props.store.shipments.find(function(t){return t.id===e.props.store.shipmentDetailsId})}},{key:"render",value:function(){var e=this,t=this.findCurrentShipmentInArray();return r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Details of the shipment ",r.a.createElement("i",null,t.id),"."),r.a.createElement(N,{showFormForValueChange:this.showFormForValueChange,shipmentDetails:t}),r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm mt-2",onClick:function(){return e.props.changePage()}},"Back to Main Page"),r.a.createElement("div",{className:"App_form-for-detail-change"},this.state.isFormForValueChangeShown&&r.a.createElement(w,{isFormForValueChangeShown:this.state.isFormForValueChangeShown,fieldToChange:this.state.fieldToChange,updateShipmentValue:this.updateShipmentValue,submitFormForNewShipmentValue:this.submitFormForNewShipmentValue})))}}]),t}(r.a.Component),V=j=Object(f.inject)("store")(Object(f.observer)(j)),I=a(24),D=a(1),x=function(){function e(){Object(o.a)(this,e),this.shipments=[],this.shipmentDetailsId=""}return Object(c.a)(e,[{key:"modifyShipments",value:function(e,t,a){if(a){var n=function(t){return t.id===e},r=this.shipments.find(n),s=this.shipments.findIndex(n),i=Object.assign({},r,Object(I.a)({},t,a));this.shipments[s]=i}}},{key:"setShipments",value:function(e){this.shipments=e}},{key:"setSelectedShipmentId",value:function(e){this.shipmentDetailsId=e}}]),e}();Object(D.decorate)(x,{shipments:D.observable,modifyShipments:D.action,setShipments:D.action,shipmentDetailsId:D.observable,setSelectedShipmentId:D.action});var B=new x,A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={isMainPage:!0},a.changePage=a.changePage.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"changePage",value:function(){this.setState({isMainPage:!this.state.isMainPage})}},{key:"render",value:function(){return r.a.createElement(p.a,{store:B},r.a.createElement("div",{className:"App"},this.state.isMainPage&&r.a.createElement(k,{changePage:this.changePage}),!this.state.isMainPage&&r.a.createElement(V,{changePage:this.changePage})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.1019c684.chunk.js.map